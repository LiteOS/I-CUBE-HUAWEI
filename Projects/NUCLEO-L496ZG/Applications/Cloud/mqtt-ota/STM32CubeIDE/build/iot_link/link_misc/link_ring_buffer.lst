ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"link_ring_buffer.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.ring_buffer_init,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	ring_buffer_init
  21              		.arch armv7e-m
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  25              		.fpu fpv4-sp-d16
  27              	ring_buffer_init:
  28              	.LVL0:
  29              	.LFB0:
  30              		.file 1 "D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc/link
   1:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** /*----------------------------------------------------------------------------
   2:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * Copyright (c) <2018>, <Huawei Technologies Co., Ltd>
   3:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * All rights reserved.
   4:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * are permitted provided that the following conditions are met:
   6:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * conditions and the following disclaimer.
   8:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * provided with the distribution.
  11:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * to endorse or promote products derived from this software without specific prior written
  13:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * permission.
  14:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  *---------------------------------------------------------------------------*/
  26:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** /*----------------------------------------------------------------------------
  27:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * Notice of Export Control Law
  28:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * ===============================================
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 2


  29:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  * applicable export control laws and regulations.
  33:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  *---------------------------------------------------------------------------*/
  34:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** /**
  35:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  *  DATE                AUTHOR      INSTRUCTION
  36:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  *  2019-04-29 10:34  zhangqianfu  The first version  
  37:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  *
  38:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****  */
  39:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** #include <stdint.h>
  40:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** #include <stddef.h>
  41:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** #include <string.h>
  42:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
  43:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** #include <link_misc.h>
  44:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
  45:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
  46:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** int ring_buffer_init(tag_ring_buffer_t *ring,unsigned char *buf, int buflen,int offset,int datalen)
  47:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** {
  31              		.loc 1 47 1 view -0
  32              		.cfi_startproc
  33              		@ args = 4, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		@ link register save eliminated.
  48:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
  36              		.loc 1 48 5 view .LVU1
  49:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if((NULL == ring))
  37              		.loc 1 49 5 view .LVU2
  38              		.loc 1 49 7 is_stmt 0 view .LVU3
  39 0000 30B1     		cbz	r0, .L3
  50:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
  51:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         return ret;
  52:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
  53:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     ring->buf     = buf;
  40              		.loc 1 53 5 is_stmt 1 view .LVU4
  54:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     ring->buflen  = buflen;
  41              		.loc 1 54 19 is_stmt 0 view .LVU5
  42 0002 C0E90012 		strd	r1, r2, [r0]
  55:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     ring->datalen = datalen;
  43              		.loc 1 55 5 is_stmt 1 view .LVU6
  44              		.loc 1 55 19 is_stmt 0 view .LVU7
  45 0006 009A     		ldr	r2, [sp]
  46              	.LVL1:
  56:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     ring->dataoff = offset;
  47              		.loc 1 56 19 view .LVU8
  48 0008 C0E90223 		strd	r2, r3, [r0, #8]
  57:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     ret = 0;
  49              		.loc 1 57 5 is_stmt 1 view .LVU9
  50              	.LVL2:
  58:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     return ret;
  51              		.loc 1 58 5 view .LVU10
  52              		.loc 1 58 12 is_stmt 0 view .LVU11
  53 000c 0020     		movs	r0, #0
  54              	.LVL3:
  55              		.loc 1 58 12 view .LVU12
  56 000e 7047     		bx	lr
  57              	.LVL4:
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 3


  58              	.L3:
  51:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
  59              		.loc 1 51 16 view .LVU13
  60 0010 4FF0FF30 		mov	r0, #-1
  61              	.LVL5:
  59:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** }
  62              		.loc 1 59 1 view .LVU14
  63 0014 7047     		bx	lr
  64              		.cfi_endproc
  65              	.LFE0:
  67 0016 00BF     		.section	.text.ring_buffer_write,"ax",%progbits
  68              		.align	1
  69              		.p2align 2,,3
  70              		.global	ring_buffer_write
  71              		.syntax unified
  72              		.thumb
  73              		.thumb_func
  74              		.fpu fpv4-sp-d16
  76              	ring_buffer_write:
  77              	.LVL6:
  78              	.LFB1:
  60:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
  61:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
  62:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** int ring_buffer_write(tag_ring_buffer_t *ring,unsigned char *buf, int len)
  63:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** {
  79              		.loc 1 63 1 is_stmt 1 view -0
  80              		.cfi_startproc
  81              		@ args = 0, pretend = 0, frame = 0
  82              		@ frame_needed = 0, uses_anonymous_args = 0
  64:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
  83              		.loc 1 64 5 view .LVU16
  65:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int cpylen;  //the current time we should move
  84              		.loc 1 65 5 view .LVU17
  66:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int lenleft;  //and how many data still left to move
  85              		.loc 1 66 5 view .LVU18
  67:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int offset;
  86              		.loc 1 67 5 view .LVU19
  68:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     unsigned char *src;
  87              		.loc 1 68 5 view .LVU20
  69:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     unsigned char *dst;
  88              		.loc 1 69 5 view .LVU21
  70:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if((NULL == ring)||(NULL == buf)||(0 == len))
  89              		.loc 1 70 5 view .LVU22
  63:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
  90              		.loc 1 63 1 is_stmt 0 view .LVU23
  91 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  92              	.LCFI0:
  93              		.cfi_def_cfa_offset 24
  94              		.cfi_offset 3, -24
  95              		.cfi_offset 4, -20
  96              		.cfi_offset 5, -16
  97              		.cfi_offset 6, -12
  98              		.cfi_offset 7, -8
  99              		.cfi_offset 14, -4
 100              		.loc 1 70 7 view .LVU24
 101 0002 0028     		cmp	r0, #0
 102 0004 4FD0     		beq	.L11
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 4


 103 0006 0F46     		mov	r7, r1
 104              		.loc 1 70 22 discriminator 1 view .LVU25
 105 0008 0029     		cmp	r1, #0
 106 000a 4CD0     		beq	.L11
 107              		.loc 1 70 37 discriminator 2 view .LVU26
 108 000c 002A     		cmp	r2, #0
 109 000e 4AD0     		beq	.L11
 110 0010 0446     		mov	r4, r0
  71:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
  72:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         return ret;//which means parameters error
  73:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
  74:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if((ring->datalen == ring->buflen)|| (ring->buflen <= 0))
 111              		.loc 1 74 5 is_stmt 1 view .LVU27
 112              		.loc 1 74 30 is_stmt 0 view .LVU28
 113 0012 D0E90130 		ldrd	r3, r0, [r0, #4]
 114              	.LVL7:
 115              		.loc 1 74 7 view .LVU29
 116 0016 9842     		cmp	r0, r3
 117 0018 27D0     		beq	.L13
 118              		.loc 1 74 39 discriminator 1 view .LVU30
 119 001a 002B     		cmp	r3, #0
 120 001c 25DD     		ble	.L13
  75:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
  76:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ret = 0;
  77:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         return  ret;//which means you could copy nothing here
  78:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
  79:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     ret = len > (ring->buflen-ring->datalen)?(ring->buflen-ring->datalen):len;
 121              		.loc 1 79 5 is_stmt 1 view .LVU31
  80:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //now let us think the method to fill the data,take care of the roll back
  81:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     lenleft = ret;
  82:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     src = buf;
  83:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if((ring->dataoff+ring->datalen)>ring->buflen) //which means the data has roll back
 122              		.loc 1 83 22 is_stmt 0 view .LVU32
 123 001e E568     		ldr	r5, [r4, #12]
  79:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //now let us think the method to fill the data,take care of the roll back
 124              		.loc 1 79 30 view .LVU33
 125 0020 1E1A     		subs	r6, r3, r0
  79:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //now let us think the method to fill the data,take care of the roll back
 126              		.loc 1 79 9 view .LVU34
 127 0022 9642     		cmp	r6, r2
 128              		.loc 1 83 22 view .LVU35
 129 0024 00EB050C 		add	ip, r0, r5
  79:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //now let us think the method to fill the data,take care of the roll back
 130              		.loc 1 79 9 view .LVU36
 131 0028 A8BF     		it	ge
 132 002a 1646     		movge	r6, r2
 133              	.LVL8:
  81:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     src = buf;
 134              		.loc 1 81 5 is_stmt 1 view .LVU37
  82:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if((ring->dataoff+ring->datalen)>ring->buflen) //which means the data has roll back
 135              		.loc 1 82 5 view .LVU38
 136              		.loc 1 83 5 view .LVU39
 137              		.loc 1 83 7 is_stmt 0 view .LVU40
 138 002c 6345     		cmp	r3, ip
 139 002e 03DA     		bge	.L7
  84:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
  85:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         offset = (ring->dataoff+ring->datalen)%ring->buflen; //we could move it one time
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 5


 140              		.loc 1 85 9 is_stmt 1 view .LVU41
 141              	.LVL9:
  86:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 142              		.loc 1 86 9 view .LVU42
  87:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         dst = ring->buf + offset;
 143              		.loc 1 87 9 view .LVU43
  88:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         if(cpylen > 0)
 144              		.loc 1 88 9 view .LVU44
 145              		.loc 1 88 11 is_stmt 0 view .LVU45
 146 0030 002E     		cmp	r6, #0
 147 0032 1DDC     		bgt	.L16
 148              	.LVL10:
 149              	.L5:
  89:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         {
  90:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             (void) memcpy(dst,src,cpylen);
  91:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->datalen += cpylen;
  92:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             lenleft -= cpylen;
  93:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         }
  94:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
  95:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     else if((ring->dataoff+ring->datalen + lenleft)>ring->buflen) //which means the data will be ro
  96:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
  97:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         //which means roll back,we should copy some here to the tail
  98:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         offset = ring->dataoff + ring->datalen;
  99:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = ring->buflen - offset;
 100:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         dst = ring->buf + offset;
 101:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 102:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         src += cpylen;
 103:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen += cpylen;
 104:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         lenleft -= cpylen;
 105:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 106:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //here means we could move it by one time
 107:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(lenleft > 0)
 108:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 109:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         offset = (ring->dataoff+ring->datalen)%ring->buflen; //we could move it one time
 110:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 111:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         dst = ring->buf + offset;
 112:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 113:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen += cpylen;
 114:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 115:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     return ret;
 116:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** }
 150              		.loc 1 116 1 view .LVU46
 151 0034 3046     		mov	r0, r6
 152 0036 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 153              	.LVL11:
 154              	.L7:
  95:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 155              		.loc 1 95 10 is_stmt 1 view .LVU47
  95:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 156              		.loc 1 95 42 is_stmt 0 view .LVU48
 157 0038 0CEB0602 		add	r2, ip, r6
 158              	.LVL12:
  95:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 159              		.loc 1 95 12 view .LVU49
 160 003c 9342     		cmp	r3, r2
 161 003e 25DB     		blt	.L17
  79:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //now let us think the method to fill the data,take care of the roll back
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 6


 162              		.loc 1 79 9 view .LVU50
 163 0040 3546     		mov	r5, r6
 164              	.LVL13:
 165              	.L8:
 107:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 166              		.loc 1 107 5 is_stmt 1 view .LVU51
 107:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 167              		.loc 1 107 7 is_stmt 0 view .LVU52
 168 0042 002D     		cmp	r5, #0
 169 0044 F6DD     		ble	.L5
 109:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 170              		.loc 1 109 9 is_stmt 1 view .LVU53
 171              	.LVL14:
 110:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         dst = ring->buf + offset;
 172              		.loc 1 110 9 view .LVU54
 111:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 173              		.loc 1 111 9 view .LVU55
 112:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen += cpylen;
 174              		.loc 1 112 9 view .LVU56
 111:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 175              		.loc 1 111 13 is_stmt 0 view .LVU57
 176 0046 D4E90031 		ldrd	r3, r1, [r4]
 109:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 177              		.loc 1 109 32 view .LVU58
 178 004a E268     		ldr	r2, [r4, #12]
 179 004c 1044     		add	r0, r0, r2
 109:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 180              		.loc 1 109 16 view .LVU59
 181 004e 90FBF1F2 		sdiv	r2, r0, r1
 182 0052 01FB1200 		mls	r0, r1, r2, r0
 112:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen += cpylen;
 183              		.loc 1 112 16 view .LVU60
 184 0056 1844     		add	r0, r0, r3
 185 0058 3946     		mov	r1, r7
 186 005a 2A46     		mov	r2, r5
 187 005c FFF7FEFF 		bl	memcpy
 188              	.LVL15:
 113:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 189              		.loc 1 113 9 is_stmt 1 view .LVU61
 113:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 190              		.loc 1 113 23 is_stmt 0 view .LVU62
 191 0060 A368     		ldr	r3, [r4, #8]
 192 0062 2B44     		add	r3, r3, r5
 193 0064 A360     		str	r3, [r4, #8]
 194              		.loc 1 116 1 view .LVU63
 195 0066 3046     		mov	r0, r6
 196 0068 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 197              	.LVL16:
 198              	.L13:
  77:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 199              		.loc 1 77 17 view .LVU64
 200 006a 0026     		movs	r6, #0
 201              	.LVL17:
 202              		.loc 1 116 1 view .LVU65
 203 006c 3046     		mov	r0, r6
 204 006e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 205              	.LVL18:
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 7


 206              	.L16:
  90:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->datalen += cpylen;
 207              		.loc 1 90 13 is_stmt 1 view .LVU66
  87:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         if(cpylen > 0)
 208              		.loc 1 87 13 is_stmt 0 view .LVU67
 209 0070 2068     		ldr	r0, [r4]
  85:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 210              		.loc 1 85 16 view .LVU68
 211 0072 9CFBF3F2 		sdiv	r2, ip, r3
 212              	.LVL19:
  85:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 213              		.loc 1 85 16 view .LVU69
 214 0076 03FB12C3 		mls	r3, r3, r2, ip
 215              	.LVL20:
  90:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->datalen += cpylen;
 216              		.loc 1 90 20 view .LVU70
 217 007a 1844     		add	r0, r0, r3
 218 007c 3246     		mov	r2, r6
 219 007e FFF7FEFF 		bl	memcpy
 220              	.LVL21:
  91:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             lenleft -= cpylen;
 221              		.loc 1 91 13 is_stmt 1 view .LVU71
  91:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             lenleft -= cpylen;
 222              		.loc 1 91 27 is_stmt 0 view .LVU72
 223 0082 A368     		ldr	r3, [r4, #8]
 224 0084 3344     		add	r3, r3, r6
 225 0086 A360     		str	r3, [r4, #8]
  92:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         }
 226              		.loc 1 92 13 is_stmt 1 view .LVU73
 227              	.LVL22:
 107:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 228              		.loc 1 107 5 view .LVU74
 229              		.loc 1 116 1 is_stmt 0 view .LVU75
 230 0088 3046     		mov	r0, r6
 231 008a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 232              	.LVL23:
 233              	.L17:
  98:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = ring->buflen - offset;
 234              		.loc 1 98 9 is_stmt 1 view .LVU76
  99:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         dst = ring->buf + offset;
 235              		.loc 1 99 9 view .LVU77
 100:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 236              		.loc 1 100 13 is_stmt 0 view .LVU78
 237 008c 2068     		ldr	r0, [r4]
  99:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         dst = ring->buf + offset;
 238              		.loc 1 99 16 view .LVU79
 239 008e A3EB0C05 		sub	r5, r3, ip
 240              	.LVL24:
 100:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 241              		.loc 1 100 9 is_stmt 1 view .LVU80
 101:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         src += cpylen;
 242              		.loc 1 101 9 view .LVU81
 101:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         src += cpylen;
 243              		.loc 1 101 16 is_stmt 0 view .LVU82
 244 0092 2A46     		mov	r2, r5
 245 0094 6044     		add	r0, r0, ip
 246              	.LVL25:
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 8


 101:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         src += cpylen;
 247              		.loc 1 101 16 view .LVU83
 248 0096 FFF7FEFF 		bl	memcpy
 249              	.LVL26:
 102:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen += cpylen;
 250              		.loc 1 102 9 is_stmt 1 view .LVU84
 103:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         lenleft -= cpylen;
 251              		.loc 1 103 23 is_stmt 0 view .LVU85
 252 009a A068     		ldr	r0, [r4, #8]
 253 009c 2844     		add	r0, r0, r5
 102:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen += cpylen;
 254              		.loc 1 102 13 view .LVU86
 255 009e 2F44     		add	r7, r7, r5
 256              	.LVL27:
 103:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         lenleft -= cpylen;
 257              		.loc 1 103 9 is_stmt 1 view .LVU87
 103:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         lenleft -= cpylen;
 258              		.loc 1 103 23 is_stmt 0 view .LVU88
 259 00a0 A060     		str	r0, [r4, #8]
 104:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 260              		.loc 1 104 9 is_stmt 1 view .LVU89
 104:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 261              		.loc 1 104 17 is_stmt 0 view .LVU90
 262 00a2 751B     		subs	r5, r6, r5
 263              	.LVL28:
 104:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 264              		.loc 1 104 17 view .LVU91
 265 00a4 CDE7     		b	.L8
 266              	.LVL29:
 267              	.L11:
  72:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 268              		.loc 1 72 16 view .LVU92
 269 00a6 4FF0FF36 		mov	r6, #-1
 270 00aa C3E7     		b	.L5
 271              		.cfi_endproc
 272              	.LFE1:
 274              		.section	.text.ring_buffer_read,"ax",%progbits
 275              		.align	1
 276              		.p2align 2,,3
 277              		.global	ring_buffer_read
 278              		.syntax unified
 279              		.thumb
 280              		.thumb_func
 281              		.fpu fpv4-sp-d16
 283              	ring_buffer_read:
 284              	.LVL30:
 285              	.LFB2:
 117:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 118:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 119:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** int ring_buffer_read(tag_ring_buffer_t *ring,unsigned char *buf, int len)
 120:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** {
 286              		.loc 1 120 1 is_stmt 1 view -0
 287              		.cfi_startproc
 288              		@ args = 0, pretend = 0, frame = 0
 289              		@ frame_needed = 0, uses_anonymous_args = 0
 121:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
 290              		.loc 1 121 5 view .LVU94
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 9


 122:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int cpylen;  //the current time we should move
 291              		.loc 1 122 5 view .LVU95
 123:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int lenleft;  //and how many data still left to move
 292              		.loc 1 123 5 view .LVU96
 124:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int offset;
 293              		.loc 1 124 5 view .LVU97
 125:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     unsigned char *src;
 294              		.loc 1 125 5 view .LVU98
 126:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     unsigned char *dst;
 295              		.loc 1 126 5 view .LVU99
 127:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if((NULL == ring)||(NULL == buf)||(0 == len))
 296              		.loc 1 127 5 view .LVU100
 120:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
 297              		.loc 1 120 1 is_stmt 0 view .LVU101
 298 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 299              	.LCFI1:
 300              		.cfi_def_cfa_offset 24
 301              		.cfi_offset 3, -24
 302              		.cfi_offset 4, -20
 303              		.cfi_offset 5, -16
 304              		.cfi_offset 6, -12
 305              		.cfi_offset 7, -8
 306              		.cfi_offset 14, -4
 307              		.loc 1 127 7 view .LVU102
 308 0002 0028     		cmp	r0, #0
 309 0004 3BD0     		beq	.L23
 310 0006 0F46     		mov	r7, r1
 311              		.loc 1 127 22 discriminator 1 view .LVU103
 312 0008 C9B3     		cbz	r1, .L23
 313              		.loc 1 127 37 discriminator 2 view .LVU104
 314 000a C2B3     		cbz	r2, .L23
 128:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 129:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         return ret;//which means parameters error
 130:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 131:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if((ring->datalen == 0) || (ring->buflen <= 0))
 315              		.loc 1 131 5 is_stmt 1 view .LVU105
 316              		.loc 1 131 13 is_stmt 0 view .LVU106
 317 000c 8568     		ldr	r5, [r0, #8]
 318 000e 0446     		mov	r4, r0
 319              		.loc 1 131 7 view .LVU107
 320 0010 7DB1     		cbz	r5, .L18
 321              		.loc 1 131 37 discriminator 1 view .LVU108
 322 0012 4668     		ldr	r6, [r0, #4]
 323              		.loc 1 131 29 discriminator 1 view .LVU109
 324 0014 002E     		cmp	r6, #0
 325 0016 1CDD     		ble	.L24
 132:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 133:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ret = 0;
 134:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         return  ret;//which means you could copy nothing here
 135:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 136:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     ret = len > ring->datalen?ring->datalen:len;
 326              		.loc 1 136 5 is_stmt 1 view .LVU110
 327              		.loc 1 136 9 is_stmt 0 view .LVU111
 328 0018 9542     		cmp	r5, r2
 329 001a A8BF     		it	ge
 330 001c 1546     		movge	r5, r2
 331              	.LVL31:
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 10


 137:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //now let us think the method to fill the data,take care of the roll back
 138:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     lenleft = ret;
 332              		.loc 1 138 5 is_stmt 1 view .LVU112
 139:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     dst = buf;
 333              		.loc 1 139 5 view .LVU113
 140:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(ring->dataoff >= (ring->buflen - lenleft)) //which means the data has roll back
 334              		.loc 1 140 5 view .LVU114
 335              		.loc 1 140 12 is_stmt 0 view .LVU115
 336 001e C368     		ldr	r3, [r0, #12]
 337              		.loc 1 140 39 view .LVU116
 338 0020 721B     		subs	r2, r6, r5
 339              	.LVL32:
 340              		.loc 1 140 7 view .LVU117
 341 0022 9342     		cmp	r3, r2
 342 0024 02DB     		blt	.L26
 141:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 142:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         offset =ring->dataoff; //we cpy part
 343              		.loc 1 142 9 is_stmt 1 view .LVU118
 344              	.LVL33:
 143:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = ring->buflen - ring->dataoff;
 345              		.loc 1 143 9 view .LVU119
 346              		.loc 1 143 16 is_stmt 0 view .LVU120
 347 0026 F61A     		subs	r6, r6, r3
 348              	.LVL34:
 144:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         src = ring->buf + offset;
 349              		.loc 1 144 9 is_stmt 1 view .LVU121
 145:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 146:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         if(cpylen > 0)
 350              		.loc 1 146 9 view .LVU122
 351              		.loc 1 146 11 is_stmt 0 view .LVU123
 352 0028 002E     		cmp	r6, #0
 353 002a 15DC     		bgt	.L31
 354              	.LVL35:
 355              	.L26:
 138:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     dst = buf;
 356              		.loc 1 138 13 view .LVU124
 357 002c 2E46     		mov	r6, r5
 358              	.LVL36:
 359              	.L20:
 147:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         {
 148:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             (void) memcpy(dst,src,cpylen);
 149:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->dataoff = (ring->dataoff + cpylen)%ring->buflen;
 150:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->datalen -= cpylen;
 151:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             lenleft -= cpylen;
 152:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             dst += cpylen;
 153:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         }
 154:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 155:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     //here means we could move it by one time
 156:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(lenleft > 0)
 360              		.loc 1 156 5 is_stmt 1 view .LVU125
 361              		.loc 1 156 7 is_stmt 0 view .LVU126
 362 002e 002E     		cmp	r6, #0
 363 0030 01DC     		bgt	.L32
 364              	.LVL37:
 365              	.L18:
 157:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 158:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         offset =ring->dataoff; //we cpy part
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 11


 159:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 160:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         src = ring->buf + offset;
 161:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 162:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->dataoff = ring->dataoff + cpylen;
 163:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen -= cpylen;
 164:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 165:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     return ret;
 166:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** }
 366              		.loc 1 166 1 view .LVU127
 367 0032 2846     		mov	r0, r5
 368 0034 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 369              	.LVL38:
 370              	.L32:
 158:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         cpylen = lenleft;
 371              		.loc 1 158 9 is_stmt 1 view .LVU128
 159:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         src = ring->buf + offset;
 372              		.loc 1 159 9 view .LVU129
 160:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 373              		.loc 1 160 9 view .LVU130
 161:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->dataoff = ring->dataoff + cpylen;
 374              		.loc 1 161 9 view .LVU131
 160:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memcpy(dst,src,cpylen);
 375              		.loc 1 160 13 is_stmt 0 view .LVU132
 376 0036 2168     		ldr	r1, [r4]
 161:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->dataoff = ring->dataoff + cpylen;
 377              		.loc 1 161 16 view .LVU133
 378 0038 3246     		mov	r2, r6
 379 003a 1944     		add	r1, r1, r3
 380 003c 3846     		mov	r0, r7
 381 003e FFF7FEFF 		bl	memcpy
 382              	.LVL39:
 162:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen -= cpylen;
 383              		.loc 1 162 9 is_stmt 1 view .LVU134
 163:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 384              		.loc 1 163 23 is_stmt 0 view .LVU135
 385 0042 D4E90223 		ldrd	r2, r3, [r4, #8]
 162:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen -= cpylen;
 386              		.loc 1 162 39 view .LVU136
 387 0046 3344     		add	r3, r3, r6
 163:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 388              		.loc 1 163 23 view .LVU137
 389 0048 921B     		subs	r2, r2, r6
 390 004a C4E90223 		strd	r2, r3, [r4, #8]
 391              		.loc 1 166 1 view .LVU138
 392 004e 2846     		mov	r0, r5
 393 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 394              	.LVL40:
 395              	.L24:
 134:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 396              		.loc 1 134 17 view .LVU139
 397 0052 0025     		movs	r5, #0
 398              	.LVL41:
 399              		.loc 1 166 1 view .LVU140
 400 0054 2846     		mov	r0, r5
 401              	.LVL42:
 402              		.loc 1 166 1 view .LVU141
 403 0056 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 12


 404              	.LVL43:
 405              	.L31:
 148:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->dataoff = (ring->dataoff + cpylen)%ring->buflen;
 406              		.loc 1 148 13 is_stmt 1 view .LVU142
 144:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 407              		.loc 1 144 13 is_stmt 0 view .LVU143
 408 0058 0168     		ldr	r1, [r0]
 409              	.LVL44:
 148:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->dataoff = (ring->dataoff + cpylen)%ring->buflen;
 410              		.loc 1 148 20 view .LVU144
 411 005a 3246     		mov	r2, r6
 412 005c 1944     		add	r1, r1, r3
 413 005e 3846     		mov	r0, r7
 414              	.LVL45:
 148:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->dataoff = (ring->dataoff + cpylen)%ring->buflen;
 415              		.loc 1 148 20 view .LVU145
 416 0060 FFF7FEFF 		bl	memcpy
 417              	.LVL46:
 149:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->datalen -= cpylen;
 418              		.loc 1 149 13 is_stmt 1 view .LVU146
 150:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             lenleft -= cpylen;
 419              		.loc 1 150 27 is_stmt 0 view .LVU147
 420 0064 201D     		adds	r0, r4, #4
 421 0066 0DC8     		ldm	r0, {r0, r2, r3}
 149:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->datalen -= cpylen;
 422              		.loc 1 149 44 view .LVU148
 423 0068 3344     		add	r3, r3, r6
 150:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             lenleft -= cpylen;
 424              		.loc 1 150 27 view .LVU149
 425 006a 921B     		subs	r2, r2, r6
 149:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             ring->datalen -= cpylen;
 426              		.loc 1 149 53 view .LVU150
 427 006c 93FBF0F1 		sdiv	r1, r3, r0
 428 0070 00FB1133 		mls	r3, r0, r1, r3
 152:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         }
 429              		.loc 1 152 17 view .LVU151
 430 0074 3744     		add	r7, r7, r6
 431              	.LVL47:
 150:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             lenleft -= cpylen;
 432              		.loc 1 150 27 view .LVU152
 433 0076 C4E90223 		strd	r2, r3, [r4, #8]
 151:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             dst += cpylen;
 434              		.loc 1 151 13 is_stmt 1 view .LVU153
 151:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****             dst += cpylen;
 435              		.loc 1 151 21 is_stmt 0 view .LVU154
 436 007a AE1B     		subs	r6, r5, r6
 437              	.LVL48:
 152:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         }
 438              		.loc 1 152 13 is_stmt 1 view .LVU155
 152:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         }
 439              		.loc 1 152 13 is_stmt 0 view .LVU156
 440 007c D7E7     		b	.L20
 441              	.LVL49:
 442              	.L23:
 129:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 443              		.loc 1 129 16 view .LVU157
 444 007e 4FF0FF35 		mov	r5, #-1
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 13


 445 0082 D6E7     		b	.L18
 446              		.cfi_endproc
 447              	.LFE2:
 449              		.section	.text.ring_buffer_datalen,"ax",%progbits
 450              		.align	1
 451              		.p2align 2,,3
 452              		.global	ring_buffer_datalen
 453              		.syntax unified
 454              		.thumb
 455              		.thumb_func
 456              		.fpu fpv4-sp-d16
 458              	ring_buffer_datalen:
 459              	.LVL50:
 460              	.LFB3:
 167:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 168:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 169:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** int ring_buffer_datalen(tag_ring_buffer_t *ring)
 170:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** {
 461              		.loc 1 170 1 is_stmt 1 view -0
 462              		.cfi_startproc
 463              		@ args = 0, pretend = 0, frame = 0
 464              		@ frame_needed = 0, uses_anonymous_args = 0
 465              		@ link register save eliminated.
 171:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
 466              		.loc 1 171 5 view .LVU159
 172:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 467              		.loc 1 172 5 view .LVU160
 468              		.loc 1 172 7 is_stmt 0 view .LVU161
 469 0000 08B1     		cbz	r0, .L35
 173:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 174:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ret = ring->datalen;
 470              		.loc 1 174 9 is_stmt 1 view .LVU162
 471              		.loc 1 174 13 is_stmt 0 view .LVU163
 472 0002 8068     		ldr	r0, [r0, #8]
 473              	.LVL51:
 474              		.loc 1 174 13 view .LVU164
 475 0004 7047     		bx	lr
 476              	.LVL52:
 477              	.L35:
 171:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 478              		.loc 1 171 9 view .LVU165
 479 0006 4FF0FF30 		mov	r0, #-1
 480              	.LVL53:
 175:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 176:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     return ret;
 481              		.loc 1 176 5 is_stmt 1 view .LVU166
 177:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** }
 482              		.loc 1 177 1 is_stmt 0 view .LVU167
 483 000a 7047     		bx	lr
 484              		.cfi_endproc
 485              	.LFE3:
 487              		.section	.text.ring_buffer_freespace,"ax",%progbits
 488              		.align	1
 489              		.p2align 2,,3
 490              		.global	ring_buffer_freespace
 491              		.syntax unified
 492              		.thumb
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 14


 493              		.thumb_func
 494              		.fpu fpv4-sp-d16
 496              	ring_buffer_freespace:
 497              	.LVL54:
 498              	.LFB4:
 178:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 179:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** int ring_buffer_freespace(tag_ring_buffer_t *ring)
 180:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** {
 499              		.loc 1 180 1 is_stmt 1 view -0
 500              		.cfi_startproc
 501              		@ args = 0, pretend = 0, frame = 0
 502              		@ frame_needed = 0, uses_anonymous_args = 0
 503              		@ link register save eliminated.
 181:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
 504              		.loc 1 181 5 view .LVU169
 182:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 505              		.loc 1 182 5 view .LVU170
 506              		.loc 1 182 7 is_stmt 0 view .LVU171
 507 0000 18B1     		cbz	r0, .L38
 183:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 184:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ret = ring->buflen-ring->datalen;
 508              		.loc 1 184 9 is_stmt 1 view .LVU172
 509              		.loc 1 184 13 is_stmt 0 view .LVU173
 510 0002 D0E90130 		ldrd	r3, r0, [r0, #4]
 511              	.LVL55:
 512              		.loc 1 184 13 view .LVU174
 513 0006 181A     		subs	r0, r3, r0
 514              	.LVL56:
 515              		.loc 1 184 13 view .LVU175
 516 0008 7047     		bx	lr
 517              	.LVL57:
 518              	.L38:
 181:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 519              		.loc 1 181 9 view .LVU176
 520 000a 4FF0FF30 		mov	r0, #-1
 521              	.LVL58:
 185:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 186:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     return ret;
 522              		.loc 1 186 5 is_stmt 1 view .LVU177
 187:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** }
 523              		.loc 1 187 1 is_stmt 0 view .LVU178
 524 000e 7047     		bx	lr
 525              		.cfi_endproc
 526              	.LFE4:
 528              		.section	.text.ring_buffer_reset,"ax",%progbits
 529              		.align	1
 530              		.p2align 2,,3
 531              		.global	ring_buffer_reset
 532              		.syntax unified
 533              		.thumb
 534              		.thumb_func
 535              		.fpu fpv4-sp-d16
 537              	ring_buffer_reset:
 538              	.LVL59:
 539              	.LFB5:
 188:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 189:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** int ring_buffer_reset(tag_ring_buffer_t *ring)
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 15


 190:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** {
 540              		.loc 1 190 1 is_stmt 1 view -0
 541              		.cfi_startproc
 542              		@ args = 0, pretend = 0, frame = 0
 543              		@ frame_needed = 0, uses_anonymous_args = 0
 544              		@ link register save eliminated.
 191:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
 545              		.loc 1 191 5 view .LVU180
 192:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 546              		.loc 1 192 5 view .LVU181
 547              		.loc 1 192 7 is_stmt 0 view .LVU182
 548 0000 20B1     		cbz	r0, .L41
 193:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 194:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->datalen = 0;
 549              		.loc 1 194 9 is_stmt 1 view .LVU183
 550              		.loc 1 194 23 is_stmt 0 view .LVU184
 551 0002 0023     		movs	r3, #0
 195:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ring->dataoff = 0;
 552              		.loc 1 195 23 view .LVU185
 553 0004 C0E90233 		strd	r3, r3, [r0, #8]
 196:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ret = 0;
 554              		.loc 1 196 9 is_stmt 1 view .LVU186
 555              	.LVL60:
 556              		.loc 1 196 13 is_stmt 0 view .LVU187
 557 0008 1846     		mov	r0, r3
 558              	.LVL61:
 559              		.loc 1 196 13 view .LVU188
 560 000a 7047     		bx	lr
 561              	.LVL62:
 562              	.L41:
 191:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 563              		.loc 1 191 9 view .LVU189
 564 000c 4FF0FF30 		mov	r0, #-1
 565              	.LVL63:
 197:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 198:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     return ret;
 566              		.loc 1 198 5 is_stmt 1 view .LVU190
 199:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** }
 567              		.loc 1 199 1 is_stmt 0 view .LVU191
 568 0010 7047     		bx	lr
 569              		.cfi_endproc
 570              	.LFE5:
 572 0012 00BF     		.section	.text.ring_buffer_deinit,"ax",%progbits
 573              		.align	1
 574              		.p2align 2,,3
 575              		.global	ring_buffer_deinit
 576              		.syntax unified
 577              		.thumb
 578              		.thumb_func
 579              		.fpu fpv4-sp-d16
 581              	ring_buffer_deinit:
 582              	.LVL64:
 583              	.LFB6:
 200:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** 
 201:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** int ring_buffer_deinit(tag_ring_buffer_t *ring)
 202:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** {
 584              		.loc 1 202 1 is_stmt 1 view -0
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 16


 585              		.cfi_startproc
 586              		@ args = 0, pretend = 0, frame = 0
 587              		@ frame_needed = 0, uses_anonymous_args = 0
 588              		@ link register save eliminated.
 203:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     int ret = -1;
 589              		.loc 1 203 5 view .LVU193
 204:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 590              		.loc 1 204 5 view .LVU194
 591              		.loc 1 204 7 is_stmt 0 view .LVU195
 592 0000 30B1     		cbz	r0, .L44
 205:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     {
 206:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         (void) memset(ring,0,sizeof(tag_ring_buffer_t));
 593              		.loc 1 206 9 is_stmt 1 view .LVU196
 594              		.loc 1 206 16 is_stmt 0 view .LVU197
 595 0002 0023     		movs	r3, #0
 596 0004 0360     		str	r3, [r0]	@ unaligned
 597 0006 4360     		str	r3, [r0, #4]	@ unaligned
 598 0008 8360     		str	r3, [r0, #8]	@ unaligned
 599 000a C360     		str	r3, [r0, #12]	@ unaligned
 207:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****         ret = 0;
 600              		.loc 1 207 9 is_stmt 1 view .LVU198
 601              	.LVL65:
 602              		.loc 1 207 13 is_stmt 0 view .LVU199
 603 000c 1846     		mov	r0, r3
 604              	.LVL66:
 605              		.loc 1 207 13 view .LVU200
 606 000e 7047     		bx	lr
 607              	.LVL67:
 608              	.L44:
 203:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     if(NULL != ring)
 609              		.loc 1 203 9 view .LVU201
 610 0010 4FF0FF30 		mov	r0, #-1
 611              	.LVL68:
 208:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     }
 209:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c ****     return ret;
 612              		.loc 1 209 5 is_stmt 1 view .LVU202
 210:D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc\link_ring_buffer.c **** }
 613              		.loc 1 210 1 is_stmt 0 view .LVU203
 614 0014 7047     		bx	lr
 615              		.cfi_endproc
 616              	.LFE6:
 618 0016 00BF     		.text
 619              	.Letext0:
 620              		.file 2 "t:\\msys\\3rd\\gcc-arm-none-eabi-9-2020-q2-update-win32\\lib\\gcc\\arm-none-eabi\\9.3.1\\
 621              		.file 3 "t:\\msys\\3rd\\gcc-arm-none-eabi-9-2020-q2-update-win32\\arm-none-eabi\\include\\sys\\_ty
 622              		.file 4 "t:\\msys\\3rd\\gcc-arm-none-eabi-9-2020-q2-update-win32\\arm-none-eabi\\include\\sys\\ree
 623              		.file 5 "t:\\msys\\3rd\\gcc-arm-none-eabi-9-2020-q2-update-win32\\arm-none-eabi\\include\\sys\\loc
 624              		.file 6 "D:/fchai/work/i-cube/I-CUBE-HUAWEI/Middlewares/Third_Party/Huawei/iot_link/link_misc/link
 625              		.file 7 "<built-in>"
ARM GAS  T:\msys\tmp\cchlQrgE.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 link_ring_buffer.c
T:\msys\tmp\cchlQrgE.s:18     .text.ring_buffer_init:00000000 $t
T:\msys\tmp\cchlQrgE.s:27     .text.ring_buffer_init:00000000 ring_buffer_init
T:\msys\tmp\cchlQrgE.s:68     .text.ring_buffer_write:00000000 $t
T:\msys\tmp\cchlQrgE.s:76     .text.ring_buffer_write:00000000 ring_buffer_write
T:\msys\tmp\cchlQrgE.s:275    .text.ring_buffer_read:00000000 $t
T:\msys\tmp\cchlQrgE.s:283    .text.ring_buffer_read:00000000 ring_buffer_read
T:\msys\tmp\cchlQrgE.s:450    .text.ring_buffer_datalen:00000000 $t
T:\msys\tmp\cchlQrgE.s:458    .text.ring_buffer_datalen:00000000 ring_buffer_datalen
T:\msys\tmp\cchlQrgE.s:488    .text.ring_buffer_freespace:00000000 $t
T:\msys\tmp\cchlQrgE.s:496    .text.ring_buffer_freespace:00000000 ring_buffer_freespace
T:\msys\tmp\cchlQrgE.s:529    .text.ring_buffer_reset:00000000 $t
T:\msys\tmp\cchlQrgE.s:537    .text.ring_buffer_reset:00000000 ring_buffer_reset
T:\msys\tmp\cchlQrgE.s:573    .text.ring_buffer_deinit:00000000 $t
T:\msys\tmp\cchlQrgE.s:581    .text.ring_buffer_deinit:00000000 ring_buffer_deinit

UNDEFINED SYMBOLS
memcpy
